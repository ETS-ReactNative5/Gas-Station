---
- name: Install Chrome Browser
  homebrew_cask:
    name: google-chrome
    state: present

- name: Convert plist file to XML
  command: plutil -convert xml1 ~/Library/Preferences/com.apple.LaunchServices/com.apple.launchservices.secure.plist
  changed_when: false

- name: Set Chromium as the default browser
  xml:
    path: ~/Library/Preferences/com.apple.LaunchServices/com.apple.launchservices.secure.plist
    xpath: '/plist/dict/array/dict/string[contains(.,"com") or contains(.,"org")]'
    value: 'com.google.Chrome'

- name: Convert plist file to binary
  command: plutil -convert binary1 ~/Library/Preferences/com.apple.LaunchServices/com.apple.launchservices.secure.plist
  changed_when: false
