---
- name: Import Microsoft signing key 
  rpm_key:
    key: "{{ microsoft_key }}"

- name: Add Visual Studio Code repository
  copy:
    content: |
      [code]
      name=Visual Studio Code
      baseurl={{ vscode_baseurl }}
      enabled=1
      gpgcheck=1
      gpgkey={{ microsoft_key }}
    dest: "{{ vscode_repo_path }}"

- name: Install Visual Studio Code
  dnf:
    name: code
    state: present
