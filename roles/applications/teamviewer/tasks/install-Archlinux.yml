---
- name: Create temporary TeamViewer directory
  file:
    path: "{{ teamviewer_temp_dir }}"
    state: directory
    mode: 0700

- name: Extract TeamViewer
  unarchive:
    src: "{{ teamviewer_url }}"
    dest: "{{ teamviewer_temp_dir }}"
    remote_src: true
    extra_opts: [--strip-components=1]

- name: Install TeamViewer
  command: ./tv-setup install force
  args:
    chdir: "{{ teamviewer_temp_dir }}"
    creates: /usr/bin/teamviewer

- name: Remove temporary TeamViewer directory
  file:
    path: "{{ teamviewer_temp_dir }}"
    state: absent
