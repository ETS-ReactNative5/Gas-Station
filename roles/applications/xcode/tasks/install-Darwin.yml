---
- name: Register the MAS installed apps
  command: mas list
  register: mas_list
  changed_when: false

- name: "Ensure {{ xcode_mas_name }} is installed"
  command: "mas install '{{ xcode_mas_id }}'"
  when: (item.id | string) not in mas_list.stdout

- name: Upgrade all apps (if configured to do so)
  command: mas upgrade
  when: mas_upgrade_all_apps
