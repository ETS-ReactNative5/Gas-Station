---
- name: Import Microsoft Edge signing key
  rpm_key:
    key: "{{ brave_key }}"

- name: Add Microsoft Edge repository
  yum_repository:
    name: microsoft-edge
    description: Microsoft Edge repository
    baseurl: "{{ edge_baseurl }}"
    gpgcheck: true
    gpgkey: "{{ edge_key }}"

- name: Install Microsoft Edge
  dnf:
    name: microsoft-edge-dev
    state: present

- name: Set Microsoft Edge as the default browser
  alternatives:
    link: /usr/bin/x-www-browser
    name: x-www-browser
    path: /usr/bin/microsoft-edge-dev
    priority: 200
  when: default_browser == 'edge'