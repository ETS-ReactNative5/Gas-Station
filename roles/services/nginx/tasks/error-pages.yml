---
- name: Ensure error_page_directory is absent
  become: yes
  file:
    path: "{{ error_page_directory }}"
    state: absent

- name: Clone the error page repository
  become: yes
  git:
    repo: "{{ error_page_repo }}"
    dest: "{{ error_page_directory }}"

- name: Ensure appropriate permissions are set
  become: yes
  shell: "chmod 644 {{ error_page_directory }}/*"

- name: Ensure appropriate permissions are set on folders
  become: yes
  shell: "find {{ error_page_directory }} -type d -exec chmod 755 {} +"
