---
- name: Ensure error_page_directory is absent
  file:
    path: "{{ error_page_directory }}"
    state: absent

- name: Clone the error page repository
  git:
    depth: "1"
    dest: "{{ error_page_directory }}"
    repo: "{{ error_page_repository }}"
    version: master

- name: Ensure appropriate permissions are set # TODO Figure out how to do this without shell for changed status to register properly
  command: "chmod 644 {{ error_page_directory }}/*"

- name: Ensure appropriate permissions are set on folders # TODO Same as above
  command: "find {{ error_page_directory }} -type d -exec chmod 755 {} +"
