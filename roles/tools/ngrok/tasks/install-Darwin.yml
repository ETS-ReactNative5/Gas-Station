---
- name: "Ensure {{ app_name }} is installed"
  community.general.homebrew:
    name: ngrok
    state: "{{ app_state | default('present') }}"

- name: "Ensure authtoken is added to the configuration file"
  lineinfile:
    path: "/Users/{{ ngrok_user }}/.ngrok2/ngrok.yml"
    regex: "^authtoken"
    line: "authtoken: {{ ngrok_token }}"
  when: ngrok_token is defined
