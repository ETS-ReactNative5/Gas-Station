---
- name: Install Scoop # TODO Run this block only if Scoop is not already installed
  block:
    - name: Install Scoop
      ansible.windows.win_shell: Invoke-Expression (New-Object System.Net.WebClient).DownloadString('https://get.scoop.sh')
    - name: Update Scoop
      ansible.windows.win_shell: scoop update
  rescue:
    - name: Remove scoop folder from user directory
      ansible.windows.win_file:
        path: "%USERPROFILE%\\scoop"
        state: absent
  when: false

- name: Install Starship
  community.windows.win_scoop:
    name: starship
    state: present
