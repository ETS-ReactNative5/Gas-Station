---
- name: Verify
  hosts: all
  gather_facts: false
  tasks:
  - name: Check vagrant
    shell: |
      vagrant --help
    register: this
    failed_when: '"Usage: vagrant" not in this.stdout'

  - name: Assertion
    assert:
      that: '"Usage: vagrant" in this.stdout'
  # The below can be uncommented after license is installed for the provider
  #- name: Check vagrant VMWare Utility
    #shell: |
      #vagrant plugin list
    #register: this_plugin
    #failed_when: '"vagrant-vmware-desktop" not in this_plugin.stdout'

  #- name: Assertion
    #assert:
      #that: '"vagrant-vmware-desktop" in this_plugin.stdout'
