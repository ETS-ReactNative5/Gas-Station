---
- name: "Ensure {{ app_name }} is installed"
  yum:
    name: golang
    state: "{{ app_state | default('present') }}"
    # Not sure if this impacts other platforms... here's the error:
    # @error fatal: [workstation]: FAILED! => {"changed": false, "msg": "Unsupported parameters for (ansible.legacy.dnf) module: enable_repo. Supported parameters include: disable_gpg_check, install_repoquery, installroot, state, bugfix, allowerasing, conf_file, disablerepo, list, skip_broken, security, allow_downgrade, update_cache (expire-cache), enable_plugin, install_weak_deps, releasever, validate_certs, enablerepo, cacheonly, disable_plugin, disable_excludes, lock_timeout, name (pkg), nobest, update_only, download_only, autoremove, download_dir, exclude."}

- name: Run user configuration tasks
  include_tasks: user-Linux.yml
  loop: "{{ user_configs }}"
  loop_control:
    label: "{{ user.username }}"
    loop_var: user
  when:
    - install_developer_dependencies
    - (user.system is not defined) or ((user.system is defined) and (not user.system))
