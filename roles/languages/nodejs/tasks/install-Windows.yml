---
- name: Install Node.js
  win_chocolatey:
    name: nodejs
    state: present

- name: Install NVM
  win_chocolatey:
    name: nvm
    state: present
  when: nodejs_install_nvm_windows

- name: Remove Node.js folder from start menu
  include_role:
    name: windows-startmenu

- name: Install global NPM packages # TODO: Make this better by using a module that only reinstalls if the version is not already latest
  ansible.windows.win_shell: "npm install -g {{ item }}@latest"
  with_items: "{{ nodejs_npm_global_packages | default([]) }}"
