---
- name: Install Node.js
  chocolatey.chocolatey.win_chocolatey:
    name: nodejs
    state: present

- name: Install NVM
  chocolatey.chocolatey.win_chocolatey:
    name: nvm
    state: present
  when: nodejs_install_nvm_windows

- name: Remove Node.js folder from start menu
  include_role:
    name: windows_startmenu

- name: Install global NPM packages # TODO: Make this better by using a module that only reinstalls if the version is not already latest
  win_command: "npm install -g {{ item }}@latest"
  loop: "{{ nodejs_npm_global_packages | default([]) }}"
