# Copyright 2020, Megabyte LLC <help@megabyte.space>

# Install software for a Windows development environment

---
- name: Set up Windows 10 development environment
  hosts: windows-dev
  tasks:
  - name: Install JRE
    win_chocolatey:
      name: jre8
      state: present
  - name: Install Android Studio
    win_chocolatey:
      name: androidstudio
      params: /PinnedToTaskbar
      state: present
  - name: Install Docker Desktop
    win_chocolatey:
      name: docker-desktop
      state: present
  - name: Install Firefox
    win_chocolatey:
      name: firefox
      params: /NoDesktopIcon /RemoveDistributionDir
      state: present
  - name: Install Git
    win_chocolatey:
      name: git
      params: /GitAndUnixToolsOnPath /WindowsTerminal /NoShellIntegration /SChannel
      state: latest
  - name: Install Hyper
    win_chocolatey:
      name: hyper
      state: present
  - name: Install Juju
    win_chocolatey:
      name: juju
      state: latest
  - name: Install Kubernetes CLI
    win_chocolatey:
      name: kubernetes-cli
      state: latest
  - name: Install Kubernetes Helm
    win_chocolatey:
      name: kubernetes-helm
      state: latest
  - name: Install Kubernetes Kompose
    win_chocolatey:
      name: kubernetes-helm
      state: latest
  - name: Install Microsoft Edge
    win_chocolatey:
      name: microsoft-edge
      state: present
  - name: Install Mullvad VPN
    win_chocolatey:
      name: mullvad-app
      state: present
  - name: Install NordVPN
    win_chocolatey:
      name: nordvpn
      state: present
  - name: Install Packer
    win_chocolatey:
      name: packer
      state: latest
  - name: Install Postman
    win_chocolatey:
      name: postman
      state: present
  - name: Install PuTTY
    win_chocolatey:
      name: putty
      state: present
  - name: Install Python 2
    win_chocolatey:
      name: python2
      state: latest
  - name: Install Vagrant
    win_chocolatey:
      name: vagrant
      state: latest
  - name: Install Visual Studio 2019 Community edition
    win_chocolatey:
      name: visualstudio2019community
      state: present
  - name: Install VMWare Workstation
    win_chocolatey:
      name: vmwareworkstation
      state: present
  - name: Install Wavebox
    win_chocolatey:
      name: wavebox
      state: present
  - name: Install Windows Assessment and Deployment Kit
    win_chocolatey:
      name: windows-adk
  - name: Install Yarn
    win_chocolatey:
      name: yarn
      state: latest
  - name: Enable Windows features
    win_optional_features:
      name:
        - Microsoft-Hyper-V
        - Microsoft-Windows-Subsystem-Linux
      state: present
    register: optional_features_status
  - name: Reboot if the installation of optional feature requires it
    win_reboot:
      when: optional_features_status.reboot_required
  - name: Install global npm packages
    npm:
      name:
        - @angular/cli
        - @nestjs/cli
        - cordova
        - electron
        - firebase-tools
        - ionic
        - surge
      global: yes