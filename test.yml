---
- hosts: pfsense
  roles:
    - roles/misc/pfsense

- hosts: seconion
  roles:
    - roles/misc/seconion

- hosts: all:!pfsense:!seconion
  gather_facts: no
  roles:
    - roles/system/connect

#- hosts: all
#  tasks:
#    - name: Output
#      debug:
#        msg: "{{ hosts | dict2items | json_query('value.hostname', hostname) | list }}"

#- hosts: all
#  tasks:
#    - name: Output
#      vars:
#        ip_address: "{{ hosts | selectattr('hostname', hostname) }}"
#      debug:
#        msg: "{{ hostname }}"
#      when: 
#      loop: "{{ lan_networks | dict2items }}"