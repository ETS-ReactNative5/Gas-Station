---
- hosts: pfsense
  become: yes
  tasks:
    - name: Update pfSense configuration
      include_tasks: tasks/pfsense/base.yml
- hosts: windows-base:windows-full
  tasks:
    - name: Update the operating system
      include_tasks: tasks/windows/update.yml
    - name: Ensure software is installed
      include_tasks: tasks/windows/install.yml
    - name: Clean up shortcuts
      include_tasks: tasks/windows/shortcuts.yml
    - name: Modify Windows settings
      include_tasks: tasks/windows/windows-settings.yml
    - name: Add/update dotfiles
      include_tasks: tasks/windows/dotfiles.yml
    - name: Perform miscellaneous tasks
      include_tasks: tasks/windows/misc.yml
    - name: Attempt authentication
      include_tasks: tasks/windows/authenticate.yml
- hosts: ubuntu-base:ubuntu-full:raspberry:ubuntu-wsl
  become: yes
  tasks:
    - name: Update the operating system
      include_tasks: tasks/ubuntu/update.yml
    - name: Ensure proper hostname
      include_tasks: tasks/ubuntu/hostname.yml
    - name: Set up authentication
      include_tasks: tasks/ubuntu/authenticate.yml
    - name: Ensure Ubuntu software is installed
      include_tasks: tasks/ubuntu/install.yml
    - name: Apply firewall rules
      include_tasks: tasks/ubuntu/firewall.yml
- hosts: ubuntu-full:ubuntu-wsl
  become: yes
  tasks:
    - name: Add dotfiles
      include_tasks: tasks/ubuntu/dotfiles.yml
- hosts: pihole
  become: yes
  tasks:
    - include_role:
        name: bendews.cloudflared
    - name: Disable wireless
      include_tasks: tasks/ubuntu/disable-wireless.yml
    - name: Set up PiHole
      include_tasks: tasks/ubuntu/pihole.yml