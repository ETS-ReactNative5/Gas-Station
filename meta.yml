---
- hosts: raspberry:ubuntu-desktop:ubuntu-server:ubuntu-wsl
  tasks:
    - name: Set up authentication (set up .ssh folder)
      include_tasks: tasks/ubuntu/authenticate.yml
- hosts: raspberry:ubuntu-desktop:ubuntu-server:ubuntu-wsl
  become: yes
  tasks:
    - name: Configure /etc/hosts and set hostname
      include_tasks: tasks/ubuntu/hosts.yml
- hosts: raspberry:ubuntu-desktop:ubuntu-server
  become: yes
  tasks:
    - name: Apply firewall rules
      include_tasks: tasks/ubuntu/ufw.yml
- hosts: raspberry:ubuntu-desktop:ubuntu-server:ubuntu-wsl
  tasks:
    - name: Add dotfiles
      include_tasks: tasks/ubuntu/dotfiles.yml
- hosts: ubuntu-desktop
  tasks:
    - name: Run miscellaneous desktop tasks
      include_tasks: tasks/ubuntu/desktop-misc.yml
- hosts: all:!windows:!pfsense
  become: yes
  tasks:
    - name: Install NGINX Optimized
      vars:
        refresh_nginx_config_only: yes
      include_role:
        name: nginx
      when: (nginx_sites_available | default([])) | length