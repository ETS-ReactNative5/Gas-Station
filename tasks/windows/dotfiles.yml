---
- name: Determine if .git exists in user profile folder
  win_stat:
    path: "%USERPROFILE%\\.git"
  register: git_profile
- name: Set up dotfiles if the .git folder does not already exist
  win_shell: |
    Push-Location -Path "$Env:USERPROFILE"
    git init
    git remote add origin {{ dotfiles_repo }}
    Pop-Location
  when:
    - git_profile.stat.exists == False
- name: Acquire the latest dotfiles
  win_shell: |
    Push-Location -Path "$Env:USERPROFILE"
    git pull origin master
    Pop-Location