---
- name: Set MOTD
  copy:
    src: files/config/motd
    dest: /etc/motd
    owner: root
    group: root
    mode: "644"
- name: Check if Chromium is installed
  stat:
    path: /snap/bin/chromium
  register: chromium_stat
- name: Set Chromium as the default browser if it is installed
  alternatives:
    name: x-www-browser
    link: /usr/bin/x-www-browser
    path: /snap/bin/chromium
    priority: 200
  when: chromium_stat.stat.exists
- name: Make Docker load on startup if it is installed
  systemd:
    enabled: yes
    name: docker
    state: restarted
  when: snaps | default([]) | selectattr("name", "equalto", "docker") | list | first | default(false)
- name: Give user permissions to Docker if it is installed
  shell: "usermod -aG docker {{ ansible_user }}"
  when: snaps | default([]) | selectattr("name", "equalto", "docker") | list | first | default(false)
- name: Make xrdp load on startup if it is installed
  systemd:
    enabled: yes
    name: xrdp
    state: restarted
  when: software | default([]) | selectattr("name", "equalto", "xrdp") | list | first | default(false)