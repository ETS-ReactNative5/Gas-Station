---
- name: Install software
  apt:
    name: "{{ item.name | default(item) }}"
    state: "{{ item.state | default('present') }}"
  with_items: "{{ software | default([]) }}"
- name: Install snaps
  snap:
    name: "{{ item.name | default(item) }}"
    classic: "{{ item.classic | default('no') }}"
  with_items: "{{ snaps | default([]) }}"
- name: Install Homebrew packages
  homebrew:
    name: "{{ item }}"
    state: present
  with_items: "{{ homebrew_packages | default([]) }}"
- name: Install global NPM packages
  npm:
    name: "{{ item }}"
    global: yes
  with_items: "{{ npm_globals | default([]) }}"
- name: Install Homebrew
  shell: |
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"